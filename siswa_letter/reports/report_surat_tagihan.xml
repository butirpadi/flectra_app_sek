<odoo>
    <data>
        <report id="report_surat_tagihan_action" model="siswa.wizard.surat.tagihan" string="Surat Tagihan" report_type="qweb-pdf" name="siswa_letter.report_surat_tagihan" file="siswa_letter.report_surat_tagihan" attachment_use="False" print_report_name="'SuratTagihan'" menu="False" paperformat="siswa_ocb11.format_surat_layout" />
    </data>
    <template id="report_surat_tagihan">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <t t-foreach="o.surat_siswa_ids" t-as="surat">
                        <t t-if="surat.total_tagihan > 0">
                        <div class="page">
                            <style>
                                    table.table{
                                        border-left:none!important;
                                        border-right:none!important;
                                        background-color:transparent!important;
                                    }

                                    table.table tbody tr td {
                                        border-right:none!important;
                                        padding-top:0;
                                        padding-bottom:0;
                                        background-color:transparent!important;
                                    }

                                    p.slimline{
                                        margin-top:0;
                                        margin-bottom:0;
                                    }

                                    table.noborder, table.noborder tbody tr, table.noborder tbody tr td{
                                        border:none;
                                    } 
                            </style>

                            <div class="row">
                                <div class="col-xs-2">
                                    <img src='/web/binary/company_logo' style="max-height:60px" />
                                </div>
                                <div class="col-xs-10 text-right">
                                    <strong>
                                        <p style="margin-top:0;margin-bottom:0;text-transform:uppercase;font-weight:bolder;" t-esc="user.company_id.name" />
                                    </strong>
                                    <p style="margin-top:0;margin-bottom:0;">
                                        <span t-esc="user.company_id.street"></span>
                                        <span t-esc="user.company_id.street2"></span>
                                    </p>
                                    <p style="margin-top:0;margin-bottom:0;">
                                        <span t-esc="user.company_id.city"></span>
                                        <span t-esc="user.company_id.state_id.name"></span>
                                        <span t-esc="user.company_id.zip"></span>
                                            Telp:
                                        <span t-esc="user.company_id.phone"></span>
                                    </p>
                                </div>
                                <div class="col-xs-12" >
                                    <hr style="border-top: 4px double black;" />
                                </div>
                                <div class="col-xs-6" >
                                    <table class="table noborder" >
                                        <tbody>
                                            <tr>
                                                <td>Nomor</td>
                                                <td>:</td>
                                                <td>
                                                    <t t-esc="surat.name" />
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Perihal</td>
                                                <td>:</td>
                                                <td>
                                                    <t t-esc="surat.surat_id.perihal" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <br /><br />
                                    <p class="slimline">Kepada</p>
                                    <p class="slimline" >Yth. Bapak/Ibu/Wali Siswa </p>
                                    <p class="slimline" > <b><t t-esc="surat.siswa_id.name" /></b> Kelas <b><t t-esc="surat.siswa_id.active_rombel_id.name"/></b> </p>
                                </div>
                                <div class="col-xs-6" ></div>
                                <div class="col-xs-12" >
                                    <br/>
                                    <p>
                                        <t t-raw="surat.surat_id.content_1"/>
                                    </p>
                                </div>

                                <t t-if="surat.surat_id.table_position=='middle'">
                                    <div class="col-xs-12" >
                                        <br/>
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>No</th>
                                                    <th>Biaya</th>
                                                    <th>Bulan</th>
                                                    <th class="text-center" >Tahun Ajaran</th>
                                                    <th>Jumlah</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <t t-set="rownum" t-value="1"/>
                                                <t t-foreach="surat.tagihan_siswa_biaya_ids" t-as="biaya">
                                                    <tr>
                                                        <td>
                                                            <t t-esc="rownum"/>
                                                        </td>
                                                        <td>
                                                            <t t-esc="biaya.biaya_id.name"/>
                                                        </td>
                                                        <td>
                                                            <t t-if="biaya.biaya_id.is_bulanan">
                                                                <t t-set="bulan_str" t-value="dict([(1,'Januari'),(2,'Februari'),(3,'Maret'),(4,'April'),(5,'Mei'),(6,'Juni'),(7,'Juli'),(8,'Agustus'),(9,'September'),(10,'Oktober'),(11,'November'),(12,'Desember'), (False,False)])"/> 
                                                                <t t-esc="bulan_str[biaya.bulan]"/>
                                                            </t>
                                                            <t t-if="not biaya.biaya_id.is_bulanan">
                                                                -
                                                            </t>
                                                        </td>
                                                        <td class="text-center" >
                                                            <t t-esc="biaya.tahunajaran_id.name"/>
                                                        </td>
                                                        <td class="text-right" >
                                                            <t t-esc="'{0:,.0f}'.format(biaya.amount_due)" />
                                                        </td>
                                                    </tr>
                                                    <t t-set="rownum" t-value="rownum+1"/>
                                                </t>
                                                <tr>
                                                    <td colspan="4" class="text-right" ><b>TOTAL</b></td>
                                                    <td class="text-right" >
                                                        <b><t t-esc="'{0:,.0f}'.format(surat.total_tagihan)" /></b>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </t>

                                <div class="col-xs-12" >
                                    <p>
                                        <t t-raw="surat.surat_id.content_2"/>
                                    </p>
                                </div>

                                <t t-if="surat.surat_id.table_position=='bottom'">
                                    <div class="col-xs-12" >
                                        <br/>
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>No</th>
                                                    <th>Biaya</th>
                                                    <th>Bulan</th>
                                                    <th class="text-center" >Tahun Ajaran</th>
                                                    <th>Jumlah</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <t t-set="rownum" t-value="1"/>
                                                <t t-foreach="surat.tagihan_siswa_biaya_ids" t-as="biaya">
                                                    <tr>
                                                        <td>
                                                            <t t-esc="rownum"/>
                                                        </td>
                                                        <td>
                                                            <t t-esc="biaya.biaya_id.name"/>
                                                        </td>
                                                        <td>
                                                            <t t-if="biaya.biaya_id.is_bulanan">
                                                                <t t-set="bulan_str" t-value="dict([(1,'Januari'),(2,'Februari'),(3,'Maret'),(4,'April'),(5,'Mei'),(6,'Juni'),(7,'Juli'),(8,'Agustus'),(9,'September'),(10,'Oktober'),(11,'November'),(12,'Desember'), (False,False)])"/> 
                                                                <t t-esc="bulan_str[biaya.bulan]"/>
                                                            </t>
                                                            <t t-if="not biaya.biaya_id.is_bulanan">
                                                                -
                                                            </t>
                                                        </td>
                                                        <td class="text-center" >
                                                            <t t-esc="biaya.tahunajaran_id.name"/>
                                                        </td>
                                                        <td class="text-right" >
                                                            <t t-esc="'{0:,.0f}'.format(biaya.amount_due)" />
                                                        </td>
                                                    </tr>
                                                    <t t-set="rownum" t-value="rownum+1"/>
                                                </t>
                                                <tr>
                                                    <td colspan="4" class="text-right" ><b>TOTAL</b></td>
                                                    <td class="text-right" >
                                                        <b><t t-esc="'{0:,.0f}'.format(surat.total_tagihan)" /></b>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </t>

                                <div class="col-xs-8" ></div>
                                <div class="col-xs-4" >
                                    <p>
                                        <t t-esc="user.company_id.city" />, 
                                        <span t-field="o.tanggal" t-field-options='{"format": "dd MMMM y"}' />
                                    </p>
                                    <p>
                                        <t t-esc="surat.surat_id.author_job" />
                                    </p>
                                    <br/><br/><br/>
                                    <p>
                                        <t t-esc="surat.surat_id.author" />
                                    </p>
                                </div>
                            </div>
                            <p style="page-break-after:always;">   </p>
                        </div>                    
                        </t>
                    </t>
                </t>
            </t>
        </t>
    </template>
</odoo>