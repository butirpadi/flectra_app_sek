<odoo>
    <data>
        <record id="protah_search_view" model="ir.ui.view">
            <field name="name">protah.search.view</field>
            <field name="model">siswa.protah</field>
            <field name="arch" type="xml">
                <search string="Search Name">
                    <field name="name" string="Nama" filter_domain="['|','|','|',('name','ilike',self),('employee_id','ilike',self),('tema','ilike',self),('subtema','ilike',self)]"/>
                    <filter string="Draft" name="filter_draft" domain="[('state','=','draft')]"/>
                    <filter string="Posted" name="filter_post" domain="[('state','=','post')]"/>
                    <filter string="Confirmed" name="filter_first" domain="[('state','=','first')]"/>
                    <filter string="Second Confirmed" name="filter_second" domain="[('state','=','second')]"/>
                    <filter string="Done" name="filter_done" domain="[('state','=','done')]"/>
                    <group string="Group By Name">
                        <filter name="group_by_state" string="State" domain="[]" context="{'group_by':'state'}"/>
                        <filter name="group_by_employee_id" string="Person" domain="[]" context="{'group_by':'employee_id'}"/>
                        <filter name="group_by_tahunajaran_id" string="Tahun Ajaran" domain="[]" context="{'group_by':'tahunajaran_id'}"/>
                        <filter name="group_by_jenjang_id" string="Jenjang" domain="[]" context="{'group_by':'jenjang_id'}"/>
                        <filter name="group_by_semester" string="Semester" domain="[]" context="{'group_by':'semester'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="siswa_protah_list_view">
            <field name="name">protah.list.view</field>
            <field name="model">siswa.protah</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name"/>
                    <field name="tahunajaran_id"/>
                    <field name="jenjang_id"/>
                    <field name="employee_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="siswa_protah_form_view" model="ir.ui.view">
            <field name="name">siswa.protah.form</field>
            <field name="model">siswa.protah</field>
            <field name="arch" type="xml">
                <form duplicate="0" string="Program Tahunan" class="o_sale_order">
                    <header>
                        <!-- <button name="action_print_view" type="object" string="Print View" attrs="{'invisible':[('state', '=', 'draft')]}" /> -->
                        <button name="action_submit" type="object" string="Submit" attrs="{'invisible':['|',('state', '!=', 'draft'),('name', '=', 'New')]}" class="bg-blue" />
                        <!-- <button name="action_first_confirm" type="object" string="Confirm" attrs="{'invisible':['|',('state', '!=', 'post'),('name', '=', 'New')]}" class="oe_edit_only bg-blue" />
                        <button name="action_second_confirm" type="object" string="Confirm" attrs="{'invisible':['|',('state', '!=', 'first'),('name', '=', 'New')]}" class="oe_edit_only bg-blue" />
                        <button confirm="Are you sure?" name="action_reject" type="object" string="Reject" attrs="{'invisible':[('state', '=', 'draft')]}" class="bg-red" groups="siswa_kurikulum.kurikulum_manager" /> -->
                        <field name="state" widget="statusbar" statusbar_visible="draft,post,first,second,done"/>
                    </header>
                    <sheet>                        
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="tahunajaran_id" attrs="{'readonly':[('state', '!=', 'draft')]}" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}' context="{'active_test': False}" />
                                <!-- <field name="tanggal" attrs="{'readonly':[('state', '!=', 'draft')]}" options="{'datepicker':{'format': 'MMM Y'}}" /> -->
                                <field name="tanggal" attrs="{'readonly':[('state', '!=', 'draft')]}" />
                                <!-- <label for="periode_awal" string="Periode"/>
                                <div class="o_address_format">
                                    <field name="periode_awal" class="o_address_city" style="width:45%;" attrs="{'readonly':[('state', '!=', 'draft')]}" />
                                    <field name="periode_akhir" class="o_address_state" style="width:45%;" attrs="{'readonly':[('state', '!=', 'draft')]}" />
                                </div> -->
                            </group>
                            <group>
                                <field name="jenjang_id" attrs="{'readonly':[('state', '!=', 'draft')]}" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}' />
                                <field name="employee_id" attrs="{'readonly':[('state', '!=', 'draft')]}" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}'  />
                                <field name="job_id" attrs="{'invisible':[('employee_id', '=', False)]}" readonly="1"  />
                            </group>
                        </group>

                        <div class="o_horizontal_separator">Rencana Pembelajaran</div>
                        <field name="tema_ids" attrs="{'readonly':[('state', '!=', 'draft')]}" >
                            <tree editable="bottom" >
                                <field name="semester" />
                                <field name="tema_id" />
                                <field name="periode_awal" />
                                <field name="periode_akhir" />
                            </tree>
                        </field>

                        <!-- <notebook>
                            <page string="Materi">
                                <div class="o_horizontal_separator">Materi</div>
                                <field name="materi" attrs="{'readonly':[('state', '!=', 'draft')]}" />
                            </page>
                            <page string="Kompetensi Dasar">
                                <div class="o_horizontal_separator">Kompetensi Dasar</div>
                                <field name="kompetensi_dasar_ids" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}' attrs="{'readonly':[('state', '!=', 'draft')]}" />
                            </page>
                            <page string="Muatan Materi">
                                <div class="o_horizontal_separator">Muatan Materi</div>
                                <button type="object" name="generate_muatan_materi" string="Generate Muatan Materi" attrs="{'invisible':[('state', '!=', 'draft')]}" />
                                <div style="height:5px;"></div>
                                <field name="muatan_materi_ids" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}' attrs="{'readonly':[('state', '!=', 'draft')]}">
                                    <tree>
                                        <field name="tanggal" />
                                        <field name="base_muatan_materi_ids" />
                                    </tree>
                                </field>
                            </page>
                        </notebook> -->

                        <!-- <div class="o_horizontal_separator">Catatan</div>
                        <field name="desc" attrs="{'invisible':[('state', '=', 'draft')]}" /> -->
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.server" id="siswa_protah_action_server">
            <field name="name">Perencanaan Pelaksanaan Pembelajaran Tahunan</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_siswa_protah"/>
             <field name="state">code</field>
            <field name="code">
                action = model.get_protah_action()
            </field>
        </record>

        <record id="siswa_protah_action_window" model="ir.actions.act_window">
            <field name="name">Perencanaan Pelaksanaan Pembelajaran Tahunan</field>
            <field name="res_model">siswa.protah</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('siswa_protah_list_view')}), 
                (0, 0, {'view_mode': 'form', 'view_id': ref('siswa_protah_form_view')})
                ]"/>
            <field name="context">{'search_default_filter_draft':True}</field>
        </record>

        <record id="siswa_protah_manager_action_window" model="ir.actions.act_window">
            <field name="name">Perencanaan Pelaksanaan Pembelajaran Tahunan</field>
            <field name="res_model">siswa.protah</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0), 
                (0, 0, {'view_mode': 'tree', 'view_id': ref('siswa_protah_list_view')}), 
                (0, 0, {'view_mode': 'form', 'view_id': ref('siswa_protah_form_view')})
                ]"/>
            <field name="context">{'search_default_filter_post':True}</field>
        </record>

        <!-- Muatan materi rel view -->
        <!-- <record id="protah_muatan_materi_base_rel_form_view" model="ir.ui.view">
            <field name="name">protah.muatan.materi.base.rel.form.view</field>
            <field name="model">protah.muatan.materi.base.rel</field>
            <field name="arch" type="xml">
                <form duplicate="0" string="Muatan Materi" class="o_sale_order">
                    <sheet>
                        <group>
                            <group>
                                <field name="tanggal" readonly="1" />
                            </group>
                            <group></group>
                        </group>
                        <div class="o_horizontal_separator">Muatan Materi</div>
                        <field name="base_muatan_materi_ids" options='{"no_open": True, "no_create_edit":True,"no_edit":True, "no_create":True}' />
                    </sheet>
                </form>
            </field>
        </record> -->



    </data>
</odoo>